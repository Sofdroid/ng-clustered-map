"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="clustered.map"),function(e,r,t){"use strict";r.module("clustered.map",[]).factory("google",function(e){if(e.google===t||e.Clusterer)throw new Error("google is not bound to window");return{maps:e.google.maps,MarkerClusterer:e.MarkerClusterer}}).directive("clusteredMap",["google",function(e){return{restrict:"EA",replace:!0,template:'<div id="map_canvas"></div>',scope:{markers:"="},link:function(t,n){function o(t){for(var o=new e.maps.LatLng(2,2),a=r.element(n[0])[0],i=new e.maps.Map(a,{zoom:7,center:o,mapTypeId:e.maps.MapTypeId.ROADMAP}),s=0;s<t.length;++s)t[s]=new e.maps.Marker({position:new e.maps.LatLng(t[s][0],t[s][1]),weight:t[s][2],title:"weight:"+t[s][2]});var u=function(e,r){for(var t=0,n=0;n<e.length;n++)t+=e[n].weight;return{text:t,index:Math.min(String(t).length,r)}},l=new e.MarkerClusterer(i);l.setCalculator(u),l.addMarkers(t)}t.$watch(function(){return t.markers},function(){t.markers&&o(t.markers)})}}}])}(window,window.angular);